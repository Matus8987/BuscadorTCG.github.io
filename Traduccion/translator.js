const translations = {
    es: {
        'nav.brand': 'Pokémon TCG',
        'nav.home': 'Inicio',
        'nav.cards': 'Cartas',
        'nav.packs': 'Paquetes',
        'packs.title': 'Paquetes Pokémon TCG',
        'packs.create': 'Comienza creando un nuevo paquete',
        'modal.create.title': 'Nuevo Paquete',
        'modal.create.name': 'Nombre del Paquete *',
        'modal.create.cards': 'Número de cartas disponibles *',
        'modal.create.rarity': 'Rareza específica (Opcional)',
        'modal.create.selectRarity': 'Seleccionar rareza',
        'modal.create.set': 'Set específico (Opcional)',
        'modal.create.selectSet': 'Seleccionar set (opcional)',
        'modal.create.type': 'Tipo de Pokémon (Opcional)',
        'modal.create.selectType': 'Seleccionar tipo',
        'modal.create.button': 'Crear Paquete',
        'modal.cancel': 'Cancelar',
        'modal.close': 'Cerrar',
        'modal.details.title': 'Cartas del paquete',
        'modal.details.noCards': 'No hay cartas guardadas en este paquete.',
        'register.title': 'Buscador de Cartas TCG',
        'register.heading': 'Registro',
        'register.username': 'Usuario',
        'register.password': 'Contraseña',
        'register.button': 'Registrar',
        'register.hasAccount': '¿Ya tienes una cuenta?',
        'register.loginLink': 'Inicia Sesión',
        'cards.title': 'Buscador de Cartas Pokémon TCG',
        'cards.search.placeholder': 'Nombre o Número Pokédex',
        'cards.search.button': 'Buscar',
        'cards.search.clear': 'Limpiar Búsqueda',
        'cards.loading': 'Cargando cartas...',
        'cards.filter.rarity': 'Rareza:',
        'cards.filter.set': 'Set:',
        'cards.filter.all': 'Todos',
        'cards.filter.clear': 'Limpiar Filtros',
        'cards.modal.type': 'Tipo:',
        'cards.modal.rarity': 'Rareza:',
        'cards.modal.set': 'Set:',
        'cards.modal.info': 'Información adicional:',
        'cards.error.title': 'Error',
        'cards.package.title': 'Selecciona un paquete',
        'cards.package.note': 'Si no hay paquetes, crea uno en la sección "Paquetes".',
        'cards.save.title': '¡Guardada!',
        'cards.save.message': 'La carta se ha añadido al paquete correctamente.',
        'profile.packs': 'Paquetes:',
        'profile.favoriteCard': 'Carta Favorita:',
        'profile.noPacks': 'Todavía no has comenzado con tus paquetes con tus propias cartas',
        'profile.welcome.greeting': '¡Buenas',
        'profile.welcome.message': 'Busca las cartas de tu pokemon favorito, y escoge esas cartas que tanto desearias tener',
        'profile.welcome.warning': '(La ludopatia se vende por separado)',
        'profile.welcome.pikachu': 'Pikachu aventándose los pasos prohibidos',
        'profile.welcome.start': 'Comenzar',
        'type.normal': 'Normal',
        'type.grass': 'Planta',
        'type.fire': 'Fuego',
        'type.water': 'Agua',
        'type.lightning': 'Eléctrico',
        'type.ice': 'Hielo',
        'type.flying': 'Volador',
        'type.poison': 'Veneno',
        'type.ground': 'Tierra',
        'type.rock': 'Roca',
        'type.bug': 'Bicho',
        'type.ghost': 'Fantasma',
        'type.psychic': 'Psíquico',
        'type.fighting': 'Lucha',
        'type.darkness': 'Siniestro',
        'type.metal': 'Acero',
        'type.fairy': 'Hada',
        'type.dragon': 'Dragón',
        'login.title': 'Buscador de Cartas TCG',
        'login.heading': 'Iniciar Sesión',
        'login.username': 'Usuario',
        'login.password': 'Contraseña',
        'login.button': 'Iniciar Sesión',
        'login.noAccount': '¿No tienes una cuenta?',
        'login.registerLink': 'Regístrate'
    },
    en: {
        'nav.brand': 'Pokémon TCG',
        'nav.home': 'Home',
        'nav.cards': 'Cards',
        'nav.packs': 'Packs',
        'packs.title': 'Pokémon TCG Packs',
        'packs.create': 'Start by creating a new pack',
        'modal.create.title': 'New Pack',
        'modal.create.name': 'Pack Name *',
        'modal.create.cards': 'Number of available cards *',
        'modal.create.rarity': 'Specific rarity (Optional)',
        'modal.create.selectRarity': 'Select rarity',
        'modal.create.set': 'Specific set (Optional)',
        'modal.create.selectSet': 'Select set (optional)',
        'modal.create.type': 'Pokémon Type (Optional)',
        'modal.create.selectType': 'Select type',
        'modal.create.button': 'Create Pack',
        'modal.cancel': 'Cancel',
        'modal.close': 'Close',
        'modal.details.title': 'Pack Cards',
        'modal.details.noCards': 'No cards saved in this pack.',
        'register.title': 'TCG Card Finder',
        'register.heading': 'Register',
        'register.username': 'Username',
        'register.password': 'Password',
        'register.button': 'Register',
        'register.hasAccount': 'Already have an account?',
        'register.loginLink': 'Sign In',
        'cards.title': 'Pokémon TCG Card Finder',
        'cards.search.placeholder': 'Name or Pokédex Number',
        'cards.search.button': 'Search',
        'cards.search.clear': 'Clear Search',
        'cards.loading': 'Loading cards...',
        'cards.filter.rarity': 'Rarity:',
        'cards.filter.set': 'Set:',
        'cards.filter.all': 'All',
        'cards.filter.clear': 'Clear Filters',
        'cards.modal.type': 'Type:',
        'cards.modal.rarity': 'Rarity:',
        'cards.modal.set': 'Set:',
        'cards.modal.info': 'Additional information:',
        'cards.error.title': 'Error',
        'cards.package.title': 'Select a pack',
        'cards.package.note': 'If there are no packs, create one in the "Packs" section.',
        'cards.save.title': 'Saved!',
        'cards.save.message': 'The card has been added to the pack correctly.',
        'profile.packs': 'Packs:',
        'profile.favoriteCard': 'Favorite Card:',
        'profile.noPacks': 'You haven\'t started with your packs with your own cards yet',
        'profile.welcome.greeting': 'Hello',
        'profile.welcome.message': 'Search for your favorite pokemon cards, and choose those cards you would so much like to have',
        'profile.welcome.warning': '(Gambling addiction sold separately)',
        'profile.welcome.pikachu': 'Pikachu doing the forbidden steps',
        'profile.welcome.start': 'Start',
        'login.title': 'TCG Card Finder',
        'login.heading': 'Sign In',
        'login.username': 'Username',
        'login.password': 'Password',
        'login.button': 'Sign In',
        'login.noAccount': 'Don\'t have an account?',
        'login.registerLink': 'Register',
    }
};

function changeLanguage(lang) {
    console.log(`Changing language to: ${lang}`);
    localStorage.setItem('selectedLanguage', lang);
    document.documentElement.lang = lang;
    updateTranslations(lang);
}

function updateTranslations(lang) {
    console.log(`Updating translations to: ${lang}`);
    
    // Actualizar textos con data-translate
    const elements = document.querySelectorAll('[data-translate]');
    elements.forEach(element => {
        const key = element.getAttribute('data-translate');
        if (translations[lang] && translations[lang][key]) {
            element.textContent = translations[lang][key];
        }
    });

    // Actualizar placeholders
    const placeholderElements = document.querySelectorAll('[data-translate-placeholder]');
    placeholderElements.forEach(element => {
        const key = element.getAttribute('data-translate-placeholder');
        if (translations[lang] && translations[lang][key]) {
            element.placeholder = translations[lang][key];
        }
    });

    // Actualizar options de tipos de Pokémon
    updatePokemonTypes(lang);
}

function updatePokemonTypes(lang) {
    const typeSelect = document.getElementById('tipoPokemon');
    if (typeSelect) {
        const options = typeSelect.querySelectorAll('option[value]:not([value=""])');
        options.forEach(option => {
            const value = option.value;
            const key = `type.${value}`;
            if (translations[lang] && translations[lang][key]) {
                option.textContent = translations[lang][key];
            }
        });
    }
}

// Hacer las funciones disponibles globalmente
window.changeLanguage = changeLanguage;
window.updateTranslations = updateTranslations;

console.log('Translator script loaded successfully');
